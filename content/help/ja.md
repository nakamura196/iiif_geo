# ヘルプ

<b>登録画面</b>

「例」ボタンを押して得られるようなjsonデータを用意の上、当該のファイルのURLを入力して、追加ボタンを押してください。

<b>閲覧画面</b>

画面左に現代地図、画面右に画像が表示されます。現代地図上のマーカー、画像上のアノテーションをクリックすると、画像と現代地図の位置が同期します。それぞれ、+ボタンで拡大、-ボタンで縮小ができます。画像については、ホームボタンを押すと、画像の初期位置に戻ります。

- 現代地図
    - レイヤーを切り替えることができます。
    - 選択されたマーカーは赤色で表示されます。

- 画像
    - 注釈ボタンをクリックして、注釈の表示・非表示を切り替えることができます。
    - 回転の初期化ボタンをクリックすると、画像の回転を初期化できます。
    - 角度を変更することで、画像を回転させることができます。

ヘッダー部の「検索」ボタンをクリックすることで、注釈に対する検索ができます。各検索結果のフォーカスボタンをクリックすることで、画像と現代地図の位置が同期します。

## URLパラメータ

このアプリケーションは以下のURLパラメータをサポートしています：

### 基本パラメータ

- **`u`** - IIIF Manifestまたはデータファイルの URL (必須)
  - 例: `?u=https://example.com/manifest.json`

### 表示制御パラメータ

- **`x`** - 地図の中心経度
- **`y`** - 地図の中心緯度  
- **`z`** - 地図のズームレベル（0-20）
- **`id`** - 初期選択する地物（フィーチャー）のID
- **`rotation`** - 画像の回転角度（度単位）
- **`autoRotate`** - 自動回転の有効/無効（true/false）

### 使用例

```
https://example.com/?u=https://data.example.com/manifest.json&x=139.7&y=35.6&z=12&id=feature123
```

上記の例では：
- 指定されたManifestファイルを読み込み
- 地図を東京（経度139.7、緯度35.6）に中心配置
- ズームレベル12で表示
- ID「feature123」の地物を初期選択

### URLパラメータの永続化

アプリケーション操作中、以下の状態変更は自動的にURLに反映されます：
- 地図の位置とズームレベル
- 選択された地物
- 画像の回転角度
- 自動回転の設定

ブラウザのURLをコピーすることで、現在の表示状態を他の人と共有できます。
